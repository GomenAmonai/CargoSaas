# üîê Admin Setup Guide

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç SystemAdmin

**SystemAdmin** ‚Äî —ç—Ç–æ —Ä–æ–ª—å –≤ —Å–∏—Å—Ç–µ–º–µ, –∫–æ—Ç–æ—Ä–∞—è –¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã `/createManager` –≤ Telegram –±–æ—Ç–µ
- –î–æ—Å—Ç—É–ø –∫ Manager Dashboard
- –î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ç–µ–Ω–∞–Ω—Ç–∞–º (multi-tenancy –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è)

---

## üéØ –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ —Å—Ç–∞—Ç—å SystemAdmin

### **–°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)**

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ–±–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/createManager` **–î–û** —Ç–æ–≥–æ –∫–∞–∫ —É —Ç–µ–±—è –µ—Å—Ç—å SystemAdmin –≤ –ë–î.

#### **–õ–æ–∫–∞–ª—å–Ω–æ (appsettings.json):**

```json
{
  "Admin": {
    "TelegramIds": "123456789,987654321"
  }
}
```

#### **Railway (Environment Variables):**

```bash
Admin__TelegramIds=123456789,987654321
```

**–§–æ—Ä–º–∞—Ç:** –°–ø–∏—Å–æ–∫ Telegram ID —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –∏–ª–∏ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ - –Ω–µ –≤–∞–∂–Ω–æ)

**–ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π Telegram ID:**
1. –ù–∞–ø–∏—à–∏ –±–æ—Ç—É [@userinfobot](https://t.me/userinfobot)
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π [@getmyid_bot](https://t.me/getmyid_bot)
3. –°–∫–æ–ø–∏—Ä—É–π —á–∏—Å–ª–æ –∏–∑ –ø–æ–ª—è "Your user ID"

---

### **–°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ —Ä–æ–ª—å –≤ –ë–î (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)**

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ç—ã —Å–æ–∑–¥–∞–ª –ø–µ—Ä–≤–æ–≥–æ Manager —á–µ—Ä–µ–∑ `/createManager`, –º–æ–∂–µ—à—å —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ SystemAdmin —á–µ—Ä–µ–∑ SQL:

```sql
-- –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ SystemAdmin
UPDATE "AspNetUsers" 
SET "Role" = 0  -- SystemAdmin = 0
WHERE "TelegramId" = YOUR_TELEGRAM_ID;
```

–ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É –±–æ—Ç–∞ (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—à—å –ø–æ–∑–∂–µ):
```
/promoteToAdmin <telegramId>
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### **–®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è**

**Railway:**
1. –û—Ç–∫—Ä–æ–π Backend Service ‚Üí Variables
2. –î–æ–±–∞–≤—å: `Admin__TelegramIds=—Ç–≤–æ–π_telegram_id`
3. Deploy

**–õ–æ–∫–∞–ª—å–Ω–æ:**
1. –û—Ç–∫—Ä–æ–π `src/Cargo.API/appsettings.json`
2. –î–æ–±–∞–≤—å –≤ —Å–µ–∫—Ü–∏—é `Admin`: `"TelegramIds": "—Ç–≤–æ–π_telegram_id"`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ API

---

### **–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**

1. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞
2. –û—Ç–ø—Ä–∞–≤—å `/createManager <telegram_id_–¥—Ä—É–≥–æ–≥–æ_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è>`
3. –î–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ –æ—Ç–≤–µ—Ç: "‚úÖ Success! User ... is now a Manager"

---

### **–®–∞–≥ 3: –°–æ–∑–¥–∞–π —Å–µ–±—è SystemAdmin (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Å–æ–∑–¥–∞–ª –ø–µ—Ä–≤–æ–≥–æ Manager, –º–æ–∂–µ—à—å —Å–¥–µ–ª–∞—Ç—å —Å–µ–±—è SystemAdmin —á–µ—Ä–µ–∑ SQL:

```sql
UPDATE "AspNetUsers" 
SET "Role" = 0 
WHERE "TelegramId" = —Ç–≤–æ–π_telegram_id;
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å —É–±—Ä–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `Admin__TelegramIds` –∏–∑ Railway (–∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ backup).

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–∞–∂–Ω–æ:**
- ‚úÖ –•—Ä–∞–Ω–∏ `Admin__TelegramIds` –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö (Railway Variables)
- ‚úÖ –ù–µ –∫–æ–º–º–∏—Ç—å `appsettings.json` —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ Telegram ID –≤ Git
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π `.gitignore` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤
- ‚úÖ –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è SystemAdmin –≤ –ë–î, –º–æ–∂–µ—à—å —É–¥–∞–ª–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞:**
- –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ä–æ–ª—å –≤ –ë–î (`Role == SystemAdmin`)
- –ï—Å–ª–∏ –Ω–µ SystemAdmin –≤ –ë–î ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –∏–∑ `Admin__TelegramIds`
- –ï—Å–ª–∏ –Ω–∏ —Ç–æ, –Ω–∏ –¥—Ä—É–≥–æ–µ ‚Üí –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω

---

## üìù –ü—Ä–∏–º–µ—Ä—ã

### **–û–¥–∏–Ω –∞–¥–º–∏–Ω:**
```bash
Admin__TelegramIds=123456789
```

### **–ù–µ—Å–∫–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–æ–≤:**
```bash
Admin__TelegramIds=123456789,987654321,555666777
```

### **–° –ø—Ä–æ–±–µ–ª–∞–º–∏ (—Ä–∞–±–æ—Ç–∞–µ—Ç):**
```bash
Admin__TelegramIds=123456789, 987654321, 555666777
```

---

## üêõ Troubleshooting

**"Access denied" –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `/createManager`:**

1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç–≤–æ–π Telegram ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `Admin__TelegramIds` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ Railway
3. –ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç (—Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±—ç–∫–µ–Ω–¥ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

**"User not found":**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ WebApp
- –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –≤ –ë–î

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ –±–æ—Ç–∞! üéâ**
